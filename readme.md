# Ruins of Symbaroum Core Rules (A DnD5e Total Conversion)
# Basic concepts and initial setup

This Symbaroum 5e core module is designed in such a way as to be completely cross-compatible with core dnd5e characters/NPCs/items/spells/etc. This means that, if desired, core 5e characters can fight alongside Symbaroum 5e characters and even against mixed creature groups of monsters using core dnd5e or Symbaroum 5e rules. Additionally, any actor can be freely swapped between the two rule sets while still preserving all common data fields.

The ruleset in use for a given actor is controlled entirely by that actor's sheet class, which is defaulted to the Symbaroum 5e Character/NPC sheets when the module is enabled.  In order to convert a core dnd5e creature to symbaroum 5e, it requires only changing the actor's sheet class to "Symbaroum 5e Character/NPC" (controlled by the "Sheet" button on the actor sheet header).

# Spellcasting and Corruption
Symbaroum 5e characters use an alternate spellcasting system from core dnd5e focused on a secondary attribute pool called "Corruption". This field is displayed on the first tab of all Symbaroum 5e actor sheets and provides a drop down to select from which ability score the actor's Corruption Threhold should be computed. Corruption threshold will be calculated according to the actor's spellcasting capabilities, as detailed below: 
  * `Non-spellcasters` - simply choose one of the 6 abilities and the threshold will be computed according to the standard formula. 
  * `Full-caster characters` - Full-caster state is determined by the "Spell Progression" field of a given class item being set to "Full Caster".  All Corruption Threshold calculations are based on the standard spellcaster formula. Choosing "Spellcasting" as the Corruption ability will use whatever ability is set on the actor's "Spellbook" tab.
  * `Spellcasting NPCs` - NPCs are assumed to be full casters if their spellcaster level (found on the "Spellbook" tab) is non-zero and then follow the same rules governing Corruption ability as described for full-caster characters.
  * `Custom calculation` - Any actor's Corruption Threshold can be overriden and a custom threshold used instead by selecting "Custom" from the Corruption ability dropdown and filling in the Threshold input field.

Additionally, the system will automatically manage the increase in Temporary or Permanent Corruption generated from casting spells, while considering the effects of favored and upcasted spells. When a spell is rolled and its chat card created in the chat log, the very end of the chat card will contain both the corruption expression rolled (ex. '1d4 + 1') as well as its resulting value, which is applied to a character's Temporary Corruption and an NPC's Permanent Corruption, unless overriden.

While using a Symbaroum 5e sheet, the actor's spell slot data will be entirely ignored and suppressed from display on the sheet. Maximum spell level is computed dynamically following the Symbaroum 5e class progression tables.  While using the core dnd5e sheet, the actor's corruption data and relevant mechanics will be entirely ignored and suppressed from display.

# Items and Corruption
In addition to spells, all Symbaroum 5e items (defined as either owned by a Symbaroum 5e actor OR residing in the sidebar) have the ability to not only generate, but use any generated corruption expressions as part of its rollData.

To define a custom corruption expression for an item, or to modify the corruption generated from a spell, enter your desired changes in the three input fields labeled "Corruption", added just below "Resource Consumption" on the item's details tab. These three fields represent "corruption type", "change mode", and "value" respectively. Populating either the type or mode dropdown will modify any corruption generated by default from the item. Note, non-spells generate 0 corruption by default. The operation of these fields are described below:
  * `Corruption type` - Either default (empty), Temporary, or Permanent. Will redirect any generated corruption to that particular corruption pool. Note, NPCs generate Permanent Corruption by default and characters generation Temporary Corruption by default.
  * `Change mode` - Either none (default), ADD, MULTIPLY, or OVERRIDE. Only spells have the ADD and MULTIPLY change modes and will add to or multiply the default spell corruption calculation. The default value, displayed as an empty string causes the third field (value) to be ignored. Finally, OVERRIDE will replace the item's default corruption expression entirely with the provided expression in that third field, which can address the item's rollData via the "@" syntax, including "@item.level", which can be used to create custom corruption scaling expressions for spells and spell-like abilities.

Additionally, when an item generates corruption, both the die expression used to generate the final value and the final value itself is stored an accessible via the item's rollData, which can then be utilized in damage formulas. For example, a special smite class ability may generate 1d4 + @mod Temporary Corruption and then deal three times that amount as damage. The custom corruption expression would read as "Temporary | OVERRIDE | 1d4 + @mod" and the damage formula would read "@item.corruption.total * 3" which results in damage equal to three times the corruption this actor took by activing the feature.  The new rollData fields are listed below and remain static until the item is rolled again.
  * `@item.corruption.expression` - Die expression that generated the most recent corruption value.
  * `@item.corruption.total` - Number representing the total amount of corruption evaluated from the corruption expression.
  * `@item.corruption.summary` - Human readable string detailing both the expression and result of the most recent corruption expression.

# Active Effects and Corruption
An actor's corruption threshold can be targeted for modification via the Active Effect system. Additionally, it can be set by hand in the Symbaroum flags. This is included to manage features and effects that alter your corruption threshold either temporarily, or permanently.
  * `data.attributes.corruption.bonus`: Active Effect key. Remember to include `"+"` for any intented numerical addition.
  * `Actor.data.flags.symbaroum5ecore.corruption.bonus`: Data path for permanent modification of an actor's corruption threshold.

# Rest types
The core dnd5e resting types have been modified and extended to support this ruleset's three-tierd rests -- Short, Long, and Extended -- with similar rest dialogs. The primary change is the ability for characters, on some rest types, to spend hit die in order to reduce Temporary Corruption. When this option is avilable for a rest, a few new elements are added to the resting dialog:
  * `[Roll] Corruption` - expends a hit die and reduces your current Temporary Corruption by an amount described in the dialog's informational text.
  * `Results Upon Completion` - details the final values of the actor's HP and Corruption once the "Rest" button is pressed. Players can use this information to quickly decide if more healing or corruption reduction is needed before the rest's free healing is applied. Note, the Corruption information is presented as "Temporary (Total) / Threshold" for quick reference.

# Other Actor and Item functionality
  * New weapon and armor proficiencies have been added for the new equipment introduced. 
  * Actors have recieved a new special trait named "Soulless", which implements the corruption-to-health mechanic presented by such features as the Dwarf's "Earth Bound" trait.
  * Spell items can be marked with their favored status, which is taken into account during spellcasting corruption calculations.
  * The "deep impact" weapon property will be automatically considered when rolling a weapon's critical damage.
  * Weapons using ammunition without an attack roll (ex. Firetubes) will correctly add its ammo's damage formula to its own. However, like attack based ammunition, the ammo's damage type is ignored -- it is suggested to use die tags (ex. `1d10[thunder]`) in these situations.


